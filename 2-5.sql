CREATE DATABASE LAB5
DROP DATABASE LAB5
USE LAB5
GO
CREATE TABLE PhongBan(
MaPB VARCHAR(7) PRIMARY KEY NOT NULL,
TenPB NVARCHAR(50) NOT NULL
)
DROP TABLE PhongBan
INSERT INTO PhongBan VALUES ('T2004M',N'Phòng Điều  Hành')
INSERT INTO PhongBan VALUES ('T2205M',N'Phòng Tài Vụ')
INSERT INTO PhongBan VALUES ('T2234M',N'Tổ Bảo Vệ')
INSERT INTO PhongBan VALUES ('T3345M',N'Tổ Lao Công')
SELECT * FROM PhongBan

CREATE TABLE NhanVien(
MaNV VARCHAR(7) PRIMARY KEY NOT NULL,
TenNV NVARCHAR(50) NOT NULL,
NgaySinh DATETIME CHECK (NgaySinh < GETDATE()),
SoCMND CHAR(15),
CONSTRAINT chk_CMND CHECK (SoCMND LIKE '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'),
GioiTinh CHAR(1),
CONSTRAINT chk_gioitinh CHECK (GioiTinh IN ('M','F')),
DiaChi NVARCHAR(20) ,
NgayVaoLam DATETIME CHECK (NgayVaoLam > YEAR(1999) ),
MaPB VARCHAR(7) 
CONSTRAINT fk FOREIGN KEY(MaPB) REFERENCES PhongBan(MaPB)
)
DROP TABLE NhanVien
GO
INSERT INTO NhanVien VALUES('001',N'Trần Công Phong','10-04-2001','00120100609','M',N'Hà Nội','01-01-2030')
INSERT INTO NhanVien VALUES('002',N'Lò Thị Ngáo','03-10-2001','95774848391','M',N'Hà Nội','01-02-2030')
INSERT INTO NhanVien VALUES('003',N'Ngu Người','20-1-2001','95834217453','M',N'Hà Nội','01-04-2030')
INSERT INTO NhanVien VALUES('004',N'Ngáo Đá','20-11-2001','95847362831','F',N'Hải Phòng','01-03-2030')
INSERT INTO NhanVien VALUES('005',N'Hoàng Thu Hà','20-6-2001','95847365219','F',N'Hải Phòng','12-1-2030')
SELECT * FROM NhanVien
CREATE TABLE LuongDA(
MaDA VARCHAR(8) PRIMARY KEY NOT NULL,
CodeNV VARCHAR(7) NOT NULL,
NgayNhan DATETIME  NOT NULL,
SoTien MONEY CHECK (SoTien > 0),
CONSTRAINT FK FOREIGN KEY (CodeNV) REFERENCES NhanVien(MaNV),
)
DROP TABLE LuongDA
GO